{% extends "base.html" %}

{% block content %}
<main class="app-main-content container">
    <h1>Driver Dashboard</h1>
    <p>Welcome, {{ current_user.USERNAME }}!</p>
    <hr>
    <h3>Your Sponsors & Points Balances</h3>

    {% if associations %}
        <table class="data-table" style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
            <thead>
                <tr style="background-color: #f2f2f2; text-align: left;">
                    <th style="padding: 12px; border: 1px solid #ddd;">Sponsor Organization</th>
                    <th style="padding: 12px; border: 1px solid #ddd;">Your Points</th>
                    <th style="padding: 12px; border: 1px solid #ddd;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for assoc in associations %}
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;">{{ assoc.sponsor.ORG_NAME }}</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">{{ assoc.points }}</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">
                        <a href="{{ url_for('driver_bp.select_store', sponsor_id=assoc.sponsor_id) }}" class="btn btn-primary">Shop Their Store</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>You are not yet associated with any sponsors. Apply to one to get started!</p>
    {% endif %}

    <div style="margin-top: 2rem;">
        <a href="{{ url_for('driver_bp.apply_driver') }}" class="btn btn-secondary">Apply to a New Sponsor</a>
        <a href="{{ url_for('driver_bp.point_history') }}" class="btn btn-secondary">View Point History</a>
        <a href="{{ url_for('auth.logout') }}" class="btn btn-outline">Logout</a>
    </div>
</main>
{% endblock %}