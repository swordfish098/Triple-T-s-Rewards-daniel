{% extends "base.html" %}
{% block content %}
<main class="app-main-content container">
  <div class="apply-form">
    <h2>Apply to a Sponsor</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class="flashes">
          {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('driver_bp.apply_driver') }}">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

      <div class="form-group">
        <label for="sponsor_id">Choose a Sponsor:</label>
        <select name="sponsor_id" id="sponsor_id" required>
          {% for s in sponsors %}
            <option value="{{ s.SPONSOR_ID }}">{{ s.ORG_NAME }} ({{ s.STATUS }})</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group" style="margin-top: 1rem;">
        <label for="reason">Why do you want to join this sponsor?</label>
        <textarea name="reason" id="reason" rows="4" placeholder="Write your reason here..."></textarea>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">Submit Application</button>
        <a href="{{ url_for('driver_bp.dashboard') }}" class="btn btn-outline">Cancel</a>
      </div>
    </form>
  </div>
</main>
{% endblock %}
