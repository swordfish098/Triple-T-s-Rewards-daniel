{% extends "base.html" %}
{% block content %}
  <main class="app-main-content container">
    <h1>Sponsor Dashboard</h1>
    <p>Welcome, {{ current_user.USERNAME }}!</p> {# Added welcome message #}

    {# Keep flashed messages block from 078d... #}
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-container"> {# Added a container for styling #}
            {% for category, message in messages %}
              {# Ensure category maps to a useful CSS class (e.g., alert-success, alert-danger) #}
              <div class="flash-message alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {# Keep link structure from 078d..., but update links based on merged routes #}
    <div class="dashboard-links" style="display: flex; flex-wrap: wrap; gap: 1rem; margin-top: 1rem;">
      {# Points management (Consistent) #}
      <a href="{{ url_for('sponsor_bp.manage_points_page') }}" class="btn btn-primary">Manage Driver Points</a>

      {# View Associated Drivers (Replaces 'Driver Management') #}
      <a href="{{ url_for('sponsor_bp.view_associated_drivers') }}" class="btn btn-primary">View Associated Drivers</a>

      {# Create New Driver (From HEAD, consistent with merged routes) #}
      <a href="{{ url_for('sponsor_bp.add_user') }}" class="btn btn-success">Create New Driver</a> {# Changed style slightly #}

      {# Review Applications (Consistent) #}
      <a href="{{ url_for('sponsor_bp.review_driver_applications') }}" class="btn btn-primary">Review Applications</a>

      {# Store Settings (Consistent) #}
      <a href="{{ url_for('sponsor_bp.update_settings') }}" class="btn btn-primary">Store Settings</a>

      {# Purchase History (From merged routes) #}
       <a href="{{ url_for('sponsor_bp.purchase_history') }}" class="btn btn-info">View Purchase History</a>

      {# Driver Point History (From merged routes) #}
       <a href="{{ url_for('sponsor_bp.driver_point_history') }}" class="btn btn-info">View Point History Log</a>

      {# Removed 'Sponsor Accounts' link as it's now admin-only #}
    </div>

    {# Keep spacer and logout button, ensure logout points to auth.logout #}
    <div class="spacer" style="height: 2rem;"></div>
    <a href="{{ url_for('auth.logout') }}" class="btn btn-outline">Logout</a>
  </main>
{% endblock %}